<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>College Expense Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background: #2a5298;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 2em;
    }
    main {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
      padding: 20px;
    }
    section {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    }
    h2 {
      margin-top: 0;
      color: #2a5298;
    }
    input, select, button {
      padding: 10px;
      margin: 5px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1em;
      width: 100%;
    }
    button {
      background: #2a5298;
      color: white;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background: #1e3c72;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: left;
    }
    th {
      background: #f0f0f0;
    }
    .progress {
      background: #eee;
      border-radius: 10px;
      height: 20px;
      margin: 10px 0;
      overflow: hidden;
    }
    .progress-bar {
      height: 100%;
      background: #2a5298;
      width: 0%;
      transition: width 0.3s;
    }
    #calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      margin-top: 10px;
    }
    .day {
      border: 1px solid #ddd;
      padding: 10px;
      min-height: 60px;
      font-size: 0.9em;
      background: #fafafa;
    }
    .due {
      background: #ffe6e6;
      border: 2px solid #ff4d4d;
    }
  </style>
</head>
<body>
  <header>üìö College Expense Tracker</header>

  <main>
    <!-- Left Column -->
    <div>
      <section>
        <h2>Add Expense</h2>
        <select id="category">
          <option value="Tuition">üéì Tuition</option>
          <option value="Textbooks">üìñ Textbooks</option>
          <option value="Rent">üè† Rent</option>
          <option value="Food">üçï Food</option>
          <option value="Entertainment">üé¨ Entertainment</option>
          <option value="Other">‚ûï Other</option>
        </select>
        <input type="number" id="amount" placeholder="Amount ($)">
        <button onclick="addExpense()">Add Expense</button>

        <h3>Expenses</h3>
        <table id="expenseTable">
          <tr><th>Category</th><th>Amount</th></tr>
        </table>
      </section>

      <section>
        <h2>Savings Goal</h2>
        <input type="number" id="goalAmount" placeholder="Enter goal amount ($)">
        <button onclick="setGoal()">Set Goal</button>
        <div class="progress"><div class="progress-bar" id="goalBar"></div></div>
        <p id="goalText">No goal set.</p>
      </section>

      <section>
        <h2>Calendar (Due Dates)</h2>
        <div id="calendar"></div>
      </section>
    </div>

    <!-- Right Column -->
    <div>
      <section>
        <h2>Spending Breakdown</h2>
        <canvas id="pieChart"></canvas>
      </section>
    </div>
  </main>

  <script>
    let expenses = JSON.parse(localStorage.getItem("expenses")) || [];
    let goal = JSON.parse(localStorage.getItem("goal")) || {amount:0, saved:0};
    const recurring = [
      {category:"Rent", amount:800, day:1},
      {category:"Tuition", amount:2000, day:5}
    ];

    function addExpense() {
      let cat = document.getElementById("category").value;
      let amt = parseFloat(document.getElementById("amount").value);
      if (!amt) return;
      expenses.push({category:cat, amount:amt});
      localStorage.setItem("expenses", JSON.stringify(expenses));
      document.getElementById("amount").value = "";
      render();
    }

    function setGoal() {
      let amt = parseFloat(document.getElementById("goalAmount").value);
      if (!amt) return;
      goal = {amount:amt, saved:0};
      localStorage.setItem("goal", JSON.stringify(goal));
      render();
    }

    function render() {
      // Expenses Table
      let table = document.getElementById("expenseTable");
      table.innerHTML = "<tr><th>Category</th><th>Amount</th></tr>";
      expenses.forEach(e => {
        table.innerHTML += `<tr><td>${e.category}</td><td>$${e.amount}</td></tr>`;
      });

      // Goal Progress
      let saved = expenses.reduce((a,b)=>a+b.amount,0);
      if (goal.amount>0) {
        let percent = Math.min((saved/goal.amount)*100,100);
        document.getElementById("goalBar").style.width = percent+"%";
        document.getElementById("goalText").innerText = `$${saved} of $${goal.amount}`;
      }

      // Pie Chart
      let cats = {};
      expenses.forEach(e=>cats[e.category]=(cats[e.category]||0)+e.amount);
      let ctx = document.getElementById("pieChart").getContext("2d");
      if (window.pie) window.pie.destroy();
      window.pie = new Chart(ctx,{
        type:'pie',
        data:{
          labels:Object.keys(cats),
          datasets:[{data:Object.values(cats),backgroundColor:["#ff6384","#36a2eb","#ffce56","#4caf50","#9966ff","#ff9f40"]}]
        }
      });

      // Calendar
      let cal = document.getElementById("calendar");
      cal.innerHTML = "";
      for (let i=1;i<=30;i++){
        let due = recurring.find(r=>r.day===i);
        cal.innerHTML += `<div class="day ${due?"due":""}">${i}${due?`<br><b>${due.category}: $${due.amount}</b>`:""}</div>`;
      }
    }

    render();
  </script>
</body>
</html>
